<!DOCTYPE html>
<html>
<head>
    <title>Tricot - App</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href='assets/css/main.css' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="form-container">
        <form id="create-form">
            <input name="hauteur" type="number" min="0" placeholder="nb de lignes" />
            <input name="longueur" type="number" min="0" placeholder="nb de colonnes" />
            <button type="submit">Cr√©er</button>
        </form>
    </div>
    <div class="container">
        <div id="canvas"></div>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
    <script>
        $( document ).ready(function(){
            $( "#create-form" ).submit(function( event ) {
                event.preventDefault();
                var dimension = 30;
                var hauteur = +$('#create-form input[name=hauteur]').val();
                var longueur = +$('#create-form input[name=longueur]').val();
                var canvas = document.getElementById("canvas");
                var elt = document.getElementsByClassName("container");
                elt[0].style.width = (longueur * dimension) + "px";

                for (var i = 0; i < hauteur; i++) {
                    for (var k = 0; k < longueur; k++) {
                        var para = document.createElement("div");
                        para.classList.add("box");
                        para.style.left = (k * dimension) + "px";
                        para.style.top = (i * dimension) + "px";
                        canvas.appendChild(para);
                        para.addEventListener('dragenter', function() {
                            this.style.borderStyle = 'dashed';
                        });
                        para.addEventListener('dragleave', function() {
                            this.style.borderStyle = 'solid';
                        });
                        para.addEventListener('dragover', function(e){
                            e.preventDefault();
                        }, false);
                        para.addEventListener('drop', function(e) {
                            e.preventDefault();
                            this.style.borderStyle = 'solid';
                            var files = e.target.files || e.dataTransfer.files;
                            if( typeof files[0] != 'undefined' ) {
                                // Do something !
                                console.log(files[0].name);
                                //this.css({'background-image' : ''})
                            }
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>